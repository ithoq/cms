<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><meta charset="utf-8"><title>Pages - Admin Dashboard UI Kit - Blank Page</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><link rel="apple-touch-icon" href="libs/pages/ico/60.png"><link rel="apple-touch-icon" sizes="76x76" href="libs/pages/ico/76.png"><link rel="apple-touch-icon" sizes="120x120" href="libs/pages/ico/120.png"><link rel="apple-touch-icon" sizes="152x152" href="libs/pages/ico/152.png"><link rel="icon" type="image/x-icon" href="favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta content="" name="description"><meta content="" name="author"><link href="/libs/pace/pace-theme-flash.css" rel="stylesheet" type="text/css"><link href="/libs/boostrapv3/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="/libs/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/libs/jquery-scrollbar/jquery.scrollbar.css" rel="stylesheet" type="text/css" media="screen"><link href="/libs/bootstrap-select2/select2.css" rel="stylesheet" type="text/css" media="screen"><link href="/libs/switchery/css/switchery.min.css" rel="stylesheet" type="text/css" media="screen"><link href="/libs/datatable/media/css/dataTables.bootstrap.min.css" rel="stylesheet" type="text/css"><link href="/libs/datatable/extensions/FixedColumns/css/fixedColumns.dataTables.min.css" rel="stylesheet" type="text/css"><link href="/libs/datatables-responsive/css/datatables.responsive.css" rel="stylesheet" type="text/css" media="screen"><link href="/libs/switchery/css/switchery.min.css" rel="stylesheet" type="text/css" media="screen"><link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css" rel="stylesheet" type="text/css"><script src="/libs/tinymce/tinymce.min.js"></script><script src="/libs/pace/pace.min.js"></script><script src="/libs/jQuery/jquery-2.2.4.min.js"></script><script src="/libs/modernizr.custom.js"></script><script src="/libs/jQuery-Knob/dist/jquery.knob.min.js"></script><script src="/libs/jQueryUi/jquery-ui.min.js"></script><script src="/libs/boostrapv3/js/bootstrap.min.js"></script><script src="/libs/jquery-easing/jquery-easy.js"></script><script src="/libs/jquery-unveil/jquery.unveil.min.js" type="text/javascript"></script><script src="/libs/jquery-bez/jquery.bez.min.js"></script><script src="/libs/jquery-ios-list/jquery.ioslist.min.js" type="text/javascript"></script><script src="/libs/jquery-actual/jquery.actual.min.js"></script><script src="/libs/jquery-scrollbar/jquery.scrollbar.min.js"></script><script src="/libs/bootstrap-select2/select2.min.js"></script><script src="/libs/classie/classie.js"></script><script src="/libs/switchery/js/switchery.min.js"></script><script src="/libs/datatable/datatables.min.js"></script><script src="/libs/pages/js/dataTables.bootstrap.js"></script><script src="/libs/datatables-responsive/js/datatables.responsive.js"></script><script src="/libs/classie/classie.js"></script><link href="/libs/pages/css/pages-icons.css" rel="stylesheet" type="text/css"><link href="/libs/pages/css/pages.css" rel="stylesheet" type="text/css" class="main-stylesheet"><link href="/css/style.css" rel="stylesheet" type="text/css"><script src="/libs/parsley/parsley.min.js"></script><script src="/libs/mustache/mustache.min.js" type="text/javascript"></script><script src="/libs/ace/src-min/ace.js" type="text/javascript" charset="utf-8"></script><script src="/libs/fancytree/dist/jquery.fancytree-all.min.js"></script><link href="libs/fancytree/dist/skin-fab/ui.fancytree.css" rel="stylesheet" type="text/css" media="screen"><script>$.fn.extend({
        animate2Css: function (animationName, callback) {
            var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
            $(this).addClass('animated ' + animationName).one(animationEnd, function() {
                $(this).removeClass('animated ' + animationName);
                  callback && callback();
            });
        }
      });</script></head><body class="fixed-header"><!-- BEGIN SIDEBPANEL--><nav data-pages="sidebar" class="page-sidebar"><!-- BEGIN SIDEBAR MENU HEADER--><div class="sidebar-header"><img src="libs/pages/assets/img/logo_white.png" alt="logo" data-src="libs/pages/assets/img/logo_white.png" data-src-retina="libs/pages/assets/img/logo_white_2x.png" width="78" height="22" class="brand"><div class="sidebar-header-controls"><button type="button" data-toggle-pin="sidebar" class="btn btn-link visible-lg-inline"><i class="fa fs-12"></i></button></div></div><!-- END SIDEBAR MENU HEADER--><!-- START SIDEBAR MENU--><div class="sidebar-menu"><!-- BEGIN SIDEBAR MENU ITEMS--><ul class="menu-items"><li class="m-t-30"><a href="/admin/" class="detailed"><span class="title">Dashboard</span><span class="details">12 New Updates</span></a><span class="bg-success icon-thumbnail"><i class="pg-home"></i></span></li><li><a href="/admin/cms" class="detailed"><span class="title">CMS</span><span class="details">Gestion des pages</span></a><span class="icon-thumbnail">W</span></li><li><a href="/admin/blocks" class="detailed"><span class="title">Blocks</span><span class="details">Gestions des blocks</span></a><span class="icon-thumbnail"><i class="pg-mail"></i></span></li><li><a href="javascript:;"><span class="title">Modules</span><span class="arrow"></span></a><span class="icon-thumbnail"><i class="pg-calender"></i></span><ul class="sub-menu"><li><a href="calendar.html">Slider</a><span class="icon-thumbnail">c</span></li><li><a href="calendar_lang.html">Languages</a><span class="icon-thumbnail">L</span></li></ul></li><li><a href="/admin/pref"><span class="title">Préférences</span></a><span class="icon-thumbnail"><i class="pg-social"></i></span></li></ul><div class="clearfix"></div></div><!-- END SIDEBAR MENU--></nav><!-- END SIDEBAR--><div class="page-container"><div class="header"><div class="container-fluid relative"><div class="pull-left full-height visible-sm visible-xs"><div class="header-inner"><a href="#" data-toggle="sidebar" class="btn-link toggle-sidebar visible-sm-inline-block visible-xs-inline-block padding-5"><span class="icon-set menu-hambuger"></span></a></div></div><div class="pull-center hidden-md hidden-lg"><div class="header-inner"><div class="brand inline"><img src="libs/pages/assets/img/logo.png" alt="logo" data-src="libs/pages/assets/img/logo.png" data-src-retina="libs/pages/assets/img/logo_2x.png" width="78" height="22"></div></div></div><div class="pull-right full-height visible-sm visible-xs"><div class="header-inner"><a href="#" data-toggle="quickview" data-toggle-element="#quickview" class="btn-link visible-sm-inline-block visible-xs-inline-block"><span class="icon-set menu-hambuger-plus"></span></a></div></div></div><div class="pull-left sm-table hidden-xs hidden-sm"><div class="header-inner"><div class="brand inline"><img src="libs/pages/assets/img/logo.png" alt="logo" data-src="libs/pages/assets/img/logo.png" data-src-retina="libs/pages/assets/img/logo_2x.png" width="78" height="22"></div></div></div><div class="pull-right"><div class="visible-lg visible-md m-t-10"><div class="pull-left p-r-10 p-t-10 fs-16 font-heading"><span class="semi-bold">David</span><span class="text-master">Nest</span></div><div class="dropdown pull-right"><button type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="profile-dropdown-toggle"><span class="thumbnail-wrapper d32 circular inline m-t-5"><img src="libs/pages/assets/img/profiles/avatar.jpg" alt="" data-src="libs/pages/assets/img/profiles/avatar.jpg" data-src-retina="libs/pages/assets/img/profiles/avatar_small2x.jpg" width="32" height="32"></span></button><ul role="menu" class="dropdown-menu profile-dropdown"><li><a href="#"><i class="pg-settings_small"></i> Settings</a></li><li><a href="#"><i class="pg-signals"></i> Help</a></li><li class="bg-master-lighter"><a href="#" class="clearfix"><span class="pull-left">Logout</span><span class="pull-right"><i class="pg-power"></i></span></a></li></ul></div></div></div></div><div class="page-content-wrapper"><div id="modalEditBlock" tabindex="-1" role="dialog" aria-hidden="true" class="modal modal-thin fade slide-up"><div class="modal-dialog modal-lg"><div class="modal-content-wrapper"><div class="modal-content"><form id="modalEditBlockForm" role="form"></form></div></div></div></div><div class="content"><div data-pages="parallax" class="jumbotron"><div class="container-fluid container-fixed-lg sm-p-l-20 sm-p-r-20"><div class="inner"><ul class="breadcrumb"><li><p>LightCMS</p></li><li><a href="#" class="active">Gestion des blocks</a></li></ul></div></div></div></div><div class="container-fluid container-fixed-lg"><div class="row"><div class="col-sm-8"><div class="panel panel-default"><div class="panel-heading"><div class="panel-block-title m-b-30"><h2>Gestion des blocks</h2></div></div><div class="panel-body"><form role="form"><div class="panel panel-transparent"><div class="panel-body"><input id="search-table" type="text" placeholder="Search" class="form-control pull-right"><table id="tableWithSearch" class="table table-hover"><thead><tr><th style="width: 45%" class="center">Nom</th><th style="width: 15%" class="center">Type</th><th style="width: 15%" class="center">Edit</th><th style="width:15%" class="center no-sort">Opération</th></tr></thead><tbody><tr data-id="2"><td class="center semi-bold"><p>Mon super nom</p></td><td class="center"><p>WYSIWYG</p></td><td class="center"><button type="button" data-id="2" data-type="dynamic" class="btn btn-default btn-modal-edit"><i class="fa fa-pencil"></i></button></td><td class="center"><div class="op-table-slider-wrapper"><div data-id="1" class="op-table-slide-container"><div class="op-table-slide-item"><button id="js-show-controls" type="button" class="btn btn-default button js-move"><i class="fa fa-trash-o"></i></button></div><div class="op-table-slide-item"><button type="button" class="btn btn-danger js-move operation"><i class="fa fa-times"></i></button><button type="button" class="btn btn-success js-op-ajax operation"><i class="fa fa-check"></i></button></div></div></div></td></tr><tr data-id="3"><td class="center semi-bold"><p>Mon super nom</p></td><td class="center"><p>WYSIWYG</p></td><td class="center"><button type="button" data-id="1" class="btn btn-default btn-modal-edit"><i class="fa fa-pencil"></i></button></td><td class="center"><div class="op-table-slider-wrapper"><div data-id="2" class="op-table-slide-container"><div class="op-table-slide-item"><button id="js-show-controls" type="button" class="btn btn-default button js-move"><i class="fa fa-trash-o"></i></button></div><div class="op-table-slide-item"><button type="button" class="btn btn-danger js-move operation"><i class="fa fa-times"></i></button><button type="button" class="btn btn-success js-op-ajax operation"><i class="fa fa-check"></i></button></div></div></div></td></tr></tbody></table></div></div></form></div></div></div><div class="col-sm-4"><div class="panel panel-default"><div class="panel-heading"><div class="panel-block-title m-b-30"><h2>Nouveau block</h2></div></div><div class="panel-body"><form role="form"><div class="form-group form-group-default m-b-20 required"><label>Nom du block</label><input type="text" class="form-control"></div><h5>Type :</h5><div class="radio radio-success"><input id="dynamique" type="radio" value="yes" name="optionyes"><label for="dynamique">Dynamique</label><input id="statique" type="radio" checked="checked" value="no" name="optionyes"><label for="statique">Statique</label></div><div class="form-group form-group-default m-b-20 required"><label>Content</label><input type="text" class="form-control"></div></form><hr class="section m-t-5 light"><div class="row"><button type="button" class="btn btn-default btn-block m-t-5">Ajouter</button></div></div></div></div></div><!-- END PANEL--></div><!-- END CONTAINER FLUID--></div><!-- END PAGE CONTENTinclude shared/footer.jade
      --></div><script src="/libs/pages/js/pages.js"></script><script src="/js/main.js"></script><script type="text/template" id="modalEditBlockJSTpl">{{#dynamic}}
      var editor = ace.edit("ace-editor");
      editor.setTheme("ace/theme/monokai");
      editor.getSession().setMode("ace/mode/twig");
      {{/dynamic}}
      {{^ dynamic}}
      tinymce.remove("#content");
      tinymce.init({
        selector: '#content',
        theme: 'modern',
        height: 200,
        plugins: [
          'advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker',
          'searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking',
          'save table contextmenu directionality emoticons template paste textcolor'
        ],
        toolbar: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons'
      }); 
      {{/dynamic}}
      $('input#submitBlock').click(function(e) {
        console.log("click");
        console.log(editor.getSession().getValue());
        {{#dynamic}}
        $("#content").val(editor.getSession().getValue());
        {{/dynamic}}
        $("#blockForm").submit();
      });</script><e></e><script type="text/template" id="modalEditBlockTpl"><div class="modal-header clearfix text-left">
        <button type="button" data-dismiss="modal" aria-hidden="true" class="close">
          <i class="pg-close fs-14"></i>
        </button>
        <h3 class="titleModalBlock">
          Editer un block 
        </h3>
        <div class="changeTypeContainer">
            {{#dynamic}}
            <span class="label label-success typeActif">Dynamique</span>
            <span id="typeActif" class="label typeNoneActif" data-type="static" data-id="{{id}}" >Statique</span>
            {{/dynamic}}
            {{^ dynamic}}
            <span class="label label-success typeActif">Statique</span>
            <span id="typeActif" class="label typeNoneActif" data-type="dynamic" data-id="{{id}}">Dynamique</span>
            {{/dynamic}}  
        </div>
        <hr class="section"/>
      </div>
      
      <div class="modal-body">
        <div class="form-group form-group-default m-b-20 required">
          <label>
            {{ name }}
          </label>
          <input type="text" class="form-control" />
        </div>
        <div class="form-group">
          <label for="content-block">
            Contenu :
          </label>
          <textarea id="content" rows="5" class="form-control" {{#dynamic}}style="display:none"{{/dynamic}}>
            {{#static}}{{{content}}}{{/static}}
          </textarea>
        </div>
        {{#dynamic}}
        <div class="ace-editor-container">
          <div id="ace-editor">{{content}}</div>
        </div>
        {{/dynamic}}
        <input type="hidden" value="{{id}}"/>
        
        
        <div class="row">
          <div class="col-sm-6">
            <button type="button" data-dismiss="modal" class="btn btn-danger btn-block m-t-5">
              Annuler
            </button>
          </div>
          <div class="col-sm-6">
            <button id="submitBlock" type="button" class="btn btn-success btn-block m-t-5">
              Enregister 
            </button>
          </div>
        </div>
      </div></script><script>// Initialize datatable showing a search box at the top right corner
      var initTableWithSearch = function() {
          var table = $('#tableWithSearch');
      
          var settings = {
              "sDom": "<'table-responsive't><'row'<p i>>",
              "destroy": true,
              "scrollCollapse": true,
              "oLanguage": {
                  "sLengthMenu": "_MENU_ ",
                  "sInfo": "Showing <b>_START_ to _END_</b> of _TOTAL_ entries"
              },
              "iDisplayLength": 5,
              "columnDefs": [{
                "targets": 'no-sort',
                "orderable": false,
              }]
          };
      
          table.dataTable(settings);
      
          // search box for table
          $('#search-table').keyup(function() {
              table.fnFilter($(this).val());
          });
      }
      
      function reloadEditModalBlock(view){
        var template = document.getElementById('modalEditBlockTpl').innerHTML;
        var script = document.getElementById('modalEditBlockJSTpl').innerHTML;
        
        var output = Mustache.render(template, view);
        var script = Mustache.render(script, view);
        
        $form = $("#modalEditBlockForm");
        $js = $("<script>");
        $js.append(script);
        $form.empty();
        $form.append(output);
        $form.append($js);
        
        $('#typeActif').click(function()
        {
        
          var $this= $(this);
          var id = $this.data("id");
          
          // AJAX ---
          var type = $this.data("type") === "dynamic" ? true : false;
          var view = {
            id: id,
            name: "Mon super block",
            dynamic: type,
            static: !type,
            content: "<h1>Mon super content </h1>"
          };
          // -----
      
          reloadEditModalBlock(view);
          
        });
      
      }
      
      
      $(function() {
        initTableWithSearch();
      
        
        $('.btn-modal-edit').click(function(){
      
            var id= $(this).closest("tr").data("id");
            
            console.log(this);
            console.log($(this));
            
            // AJAX ---
            var type = $(this).data("type") === "dynamic" ? true : false;
            var view = {
              id: id,
              name: "Mon super block",
              dynamic: type,
              static: !type,
              content: "<h1>Mon super content </h1>"
            };
            // -----
        
          reloadEditModalBlock(view);
            
            $("#modalEditBlock").modal('show');
        });
        
      
       // bouton opération du tableau de fichiers
          $("#tableWithSearch .js-move").on("click", function() {
            $this = $(this);
            $container = $this.closest(".op-table-slide-container");
            $container.toggleClass("move");
            changeClass($container, $this.data("type"));
          });
      
          $("#tableWithSearch .js-op-ajax").on("click", function() {
            $this = $(this);
            $container = $this.closest(".op-table-slide-container");
            var id = $container.data("id");
            var nom = "nom de l'image que tu vas récupérer";
            var enabled = true;
            alert("Tu peux envoyer les données avec l'id" + id);
            $container.toggleClass("move");
            changeClass($container, $this.data("type"));
          })
          
        // bouton radio ON/OFF
        
        $('input[type="radio"]').click(function(){ 
        $('input[type="radio"]').prop("checked", false);
        $(this).prop("checked", true);
        $('p').toggleClass('sad');
        });
            
      });</script></body></html>